<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>CentOS7安装Mysql | Hexo</title>
  <meta name="description" content="1. 安装Maria DB使用yum安装 (需要配置好yum,有网络) yum install mariadb-server 需要依赖, 输入y 回车继续  安装完成后如下所示:  2. MariaDB 命令 启动数据库:  systemctl start mariadb  停止数据库:  systemctl stop mariadb  重启数据库:  systemctl restart mari">
<meta property="og:type" content="article">
<meta property="og:title" content="CentOS7安装Mysql">
<meta property="og:url" content="http://fyvan.github.io/undefined/4871.html">
<meta property="og:site_name" content="Yvan Blog">
<meta property="og:description" content="1. 安装Maria DB使用yum安装 (需要配置好yum,有网络) yum install mariadb-server 需要依赖, 输入y 回车继续  安装完成后如下所示:  2. MariaDB 命令 启动数据库:  systemctl start mariadb  停止数据库:  systemctl stop mariadb  重启数据库:  systemctl restart mari">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://fyvan.github.io/undefined/images/loading.gif">
<meta property="og:image" content="http://fyvan.github.io/undefined/images/loading.gif">
<meta property="og:image" content="http://fyvan.github.io/undefined/images/loading.gif">
<meta property="og:image" content="http://fyvan.github.io/undefined/images/loading.gif">
<meta property="og:image" content="http://fyvan.github.io/undefined/images/loading.gif">
<meta property="og:image" content="http://fyvan.github.io/undefined/images/loading.gif">
<meta property="article:published_time" content="2020-05-26T08:09:00.910Z">
<meta property="article:modified_time" content="2020-06-06T11:33:39.110Z">
<meta property="article:author" content="Yvan Yang">
<meta property="article:tag" content="CentOS7, mariadb">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://fyvan.github.io/undefined/images/loading.gif">
  <!-- Canonical links -->
  <link rel="canonical" href="http://fyvan.github.io/undefined/4871.html">
  
    <link rel="alternate" href="/atom.xml" title="Yvan Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 4.2.1"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/cofess" target="_blank">
          <img class="img-circle img-rotate" src="./images/loading.gif" data-original="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">昵称</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Web Developer &amp; Designer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-books">
          <a href="/books">
            
            <i class="icon icon-book-fill"></i>
            
            <span class="menu-title">书单</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://weibo.com/cofess" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
        <li><a href="https://www.behance.net/cofess" target="_blank" title="Behance" data-toggle=tooltip data-placement=top><i class="icon icon-behance"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/API/">API</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MYSQL/">MYSQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Project/">Project</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Install/">Software_Install</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cate1/">cate1</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/cate1/cate2/">cate2</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/software/">software</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/synchronized/">synchronized</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">性能优化</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS7-Nginx/" rel="tag">CentOS7, Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS7-Redis/" rel="tag">CentOS7, Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS7-jdk1-8/" rel="tag">CentOS7, jdk1.8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS7-mariadb/" rel="tag">CentOS7, mariadb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySql/" rel="tag">MySql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ObjectMapper/" rel="tag">ObjectMapper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Project/" rel="tag">Project</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubantu-MongoDB/" rel="tag">Ubantu,MongoDB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper/" rel="tag">Zookeeper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyword1-keyword2/" rel="tag">keyword1,keyword2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/synchronized/" rel="tag">synchronized</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/CentOS7-Nginx/" style="font-size: 13px;">CentOS7, Nginx</a> <a href="/tags/CentOS7-Redis/" style="font-size: 13px;">CentOS7, Redis</a> <a href="/tags/CentOS7-jdk1-8/" style="font-size: 13px;">CentOS7, jdk1.8</a> <a href="/tags/CentOS7-mariadb/" style="font-size: 13px;">CentOS7, mariadb</a> <a href="/tags/Docker/" style="font-size: 13px;">Docker</a> <a href="/tags/MySql/" style="font-size: 13px;">MySql</a> <a href="/tags/ObjectMapper/" style="font-size: 13px;">ObjectMapper</a> <a href="/tags/Project/" style="font-size: 13px;">Project</a> <a href="/tags/SpringMVC/" style="font-size: 13px;">SpringMVC</a> <a href="/tags/Ubantu-MongoDB/" style="font-size: 13px;">Ubantu,MongoDB</a> <a href="/tags/Zookeeper/" style="font-size: 13px;">Zookeeper</a> <a href="/tags/keyword1-keyword2/" style="font-size: 13px;">keyword1,keyword2</a> <a href="/tags/redis/" style="font-size: 13px;">redis</a> <a href="/tags/synchronized/" style="font-size: 13px;">synchronized</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 14px;">面试</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/undefined/e999.html" class="title">spring面试整理</a>
              </p>
              <p class="item-date">
                <time datetime="2020-06-15T02:08:06.870Z" itemprop="datePublished">2020-06-15</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">性能优化</a>
              </p>
              <p class="item-title">
                <a href="/undefined/1529.html" class="title">面试之性能优化</a>
              </p>
              <p class="item-date">
                <time datetime="2020-06-13T00:46:31.457Z" itemprop="datePublished">2020-06-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">性能优化</a>
              </p>
              <p class="item-title">
                <a href="/undefined/1529.html" class="title">面试之性能优化</a>
              </p>
              <p class="item-date">
                <time datetime="2020-06-10T11:30:08.440Z" itemprop="datePublished">2020-06-10</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Project/">Project</a>
              </p>
              <p class="item-title">
                <a href="/undefined/af36.html" class="title">项目业务实现</a>
              </p>
              <p class="item-date">
                <time datetime="2020-06-09T11:07:05.370Z" itemprop="datePublished">2020-06-09</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/redis/">redis</a>
              </p>
              <p class="item-title">
                <a href="/undefined/776d.html" class="title">Redis常见的性能问题</a>
              </p>
              <p class="item-date">
                <time datetime="2020-06-09T00:38:57.562Z" itemprop="datePublished">2020-06-09</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-SoftwareInstall-2020-05-26-CentOS-mysql" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      CentOS7安装Mysql
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/undefined/4871.html" class="article-date">
	  <time datetime="2020-05-26T08:09:00.910Z" itemprop="datePublished">2020-05-26</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Software-Install/">Software_Install</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link" href="/tags/CentOS7-mariadb/" rel="tag">CentOS7, mariadb</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/undefined/4871.html#comments" class="article-comment-link">评论</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h3 id="1-安装Maria-DB"><a href="#1-安装Maria-DB" class="headerlink" title="1. 安装Maria DB"></a>1. 安装Maria DB</h3><p>使用yum安装 (需要配置好yum,有网络)</p>
<pre class=" language-shell"><code class="language-shell">yum install mariadb-server</code></pre>
<p>需要依赖, 输入y 回车继续</p>
<p><img src="./images/loading.gif" data-original="../images/posts/SoftwareInstall-2020-05-26-CentOS-mysql/image-20200526161530741.png" alt="image-提示需要安装依赖"></p>
<p>安装完成后如下所示:</p>
<p><img src="./images/loading.gif" data-original="../images/posts/SoftwareInstall-2020-05-26-CentOS-mysql/image-20200526161623101.png" alt="image-安装完成"></p>
<h3 id="2-MariaDB-命令"><a href="#2-MariaDB-命令" class="headerlink" title="2. MariaDB 命令"></a>2. MariaDB 命令</h3><ol>
<li>启动数据库:</li>
</ol>
<pre class=" language-shell"><code class="language-shell">systemctl start mariadb</code></pre>
<ol start="2">
<li>停止数据库:</li>
</ol>
<pre class=" language-shell"><code class="language-shell">systemctl stop mariadb</code></pre>
<ol start="3">
<li>重启数据库:</li>
</ol>
<pre class=" language-shell"><code class="language-shell">systemctl restart mariadb</code></pre>
<h3 id="3-MariaDB-配置"><a href="#3-MariaDB-配置" class="headerlink" title="3. MariaDB 配置"></a>3. MariaDB 配置</h3><p>输入<code>mysql_secure_installation</code>命令配置数据库,如下注释中的解释</p>
<pre class=" language-shell"><code class="language-shell">[root@localhost src]# mysql_secure_installation 

NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we'll need the current
password for the root user.  If you've just installed MariaDB, and
you haven't set the root password yet, the password will be blank,
so you should just press enter here.

Enter current password for root (enter for none): 
OK, successfully used password, moving on...

Setting the root password ensures that nobody can log into the MariaDB
root user without the proper authorisation.

Set root password? [Y/n] Y    # 设置密码 y
New password:                 # 新密码
Re-enter new password:         # 再次输入密码
Password updated successfully!
Reloading privilege tables..
 ... Success!


By default, a MariaDB installation has an anonymous user, allowing anyone
to log into MariaDB without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] Y        #是否移除匿名用户,输入Y,回车继续 
 ... Success!

Normally, root should only be allowed to connect from 'localhost'.  This
ensures that someone cannot guess at the root password from the network.

# 拒绝root远程登录,n, 不管y/n,都会拒绝root远程登录
Disallow root login remotely? [Y/n] n 
 ... skipping.

By default, MariaDB comes with a database named 'test' that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

# 删除test数据库,y:删除 n:不删除. 数据库中会有一个test数据库,一般不需要
Remove test database and access to it? [Y/n] n 
 ... skipping.

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] y # 重新加载权限表,y. 或者重启服务也行
 ... Success!

Cleaning up...

All done!  If you've completed all of the above steps, your MariaDB
installation should now be secure.

Thanks for using MariaDB!
</code></pre>
<h3 id="4-数据库登录测试"><a href="#4-数据库登录测试" class="headerlink" title="4. 数据库登录测试"></a>4. 数据库登录测试</h3><p>使用用户名:root &amp; 密码:root 登录数据库</p>
<pre class=" language-shell"><code class="language-shell">[root@localhost src]# mysql -uroot -p
Enter password: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 7
Server version: 5.5.65-MariaDB MariaDB Server

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> </code></pre>
<h3 id="5-设定远程访问"><a href="#5-设定远程访问" class="headerlink" title="5. 设定远程访问"></a>5. 设定远程访问</h3><p>说明:Mysql数据库默认条件下不允许远程用户访问数据库,只允许本地服务通过127.0.0.1/localhost的方式访问!</p>
<p>需求:想通过Windows的SqlYog程序远程访问数据库,则必须修改mysql的权限列表.</p>
<ol>
<li>本地登录数据库:</li>
</ol>
<pre class=" language-shell"><code class="language-shell">[root@localhost src]# mysql -uroot -p
Enter password: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 8
Server version: 5.5.65-MariaDB MariaDB Server

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> 
</code></pre>
<ol start="2">
<li>查看并切换数据库:</li>
</ol>
<pre class=" language-mysql"><code class="language-mysql">MariaDB [(none)]> show databases;    # 查看数据库
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| test               |
+--------------------+
4 rows in set (0.00 sec)

MariaDB [(none)]> use mysql;    # 切换数据库
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [mysql]> </code></pre>
<ol start="3">
<li>查看数据库表信息:</li>
</ol>
<pre class=" language-mysql"><code class="language-mysql">MariaDB [mysql]> show tables;    # 查看数据库表信息
+---------------------------+
| Tables_in_mysql           |
+---------------------------+
| columns_priv              |
| db                        |
| event                     |
| func                      |
| general_log               |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| host                      |
| ndb_binlog_index          |
| plugin                    |
| proc                      |
| procs_priv                |
| proxies_priv              |
| servers                   |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+
24 rows in set (0.00 sec)</code></pre>
<ol start="4">
<li>查看root账户权限信息</li>
</ol>
<pre class=" language-mysql"><code class="language-mysql"># host : 表示允许访问的主机
# user : 用户信息
# password : 密码信息 (MD5加密)

MariaDB [mysql]> select host,user,password from user;
+-----------+------+-------------------------------------------+
| host      | user | password                                  |
+-----------+------+-------------------------------------------+
| localhost | root | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| 127.0.0.1 | root | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| ::1       | root | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
+-----------+------+-------------------------------------------+
3 rows in set (0.00 sec)</code></pre>
<ol start="5">
<li>修改用户权限列表,实现用户远程访问</li>
</ol>
<p>将与主机名相等的字段改为<code>" % "</code>,我的主机名为root</p>
<pre class=" language-mysql"><code class="language-mysql">MariaDB [mysql]> update user set host='%' where host='localhost';
Query OK, 1 rows affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

MariaDB [mysql]> select host,user,password from user;
+-----------+------+-------------------------------------------+
| host      | user | password                                  |
+-----------+------+-------------------------------------------+
| %            | root | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| 127.0.0.1 | root | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| ::1       | root | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
+-----------+------+-------------------------------------------+
3 rows in set (0.00 sec)</code></pre>
<ol start="6">
<li>刷新权限列表或者重启数据库服务</li>
</ol>
<pre class=" language-mysql"><code class="language-mysql"># 刷新权限列表
MariaDB [mysql]> flush privileges;        
Query OK, 0 rows affected (0.00 sec)

# 或者重启数据库服务
[root@localhost src]# systemctl restart mariadb
[root@localhost src]# </code></pre>
<ol start="7">
<li>关闭Linux防火墙,使用SQLyog连接数据库</li>
</ol>
<p><img src="./images/loading.gif" data-original="../images/posts/SoftwareInstall-2020-05-26-CentOS-mysql/image-20200526173825486.png" alt="image-SQLyog连接数据库"></p>
<ol start="8">
<li>设置Linux开机自动启动数据库服务</li>
</ol>
<pre class=" language-shell"><code class="language-shell">[root@localhost ~]# systemctl enable mariadb
Created symlink from /etc/systemd/system/multi-user.target.wants/mariadb.service to /usr/lib/systemd/system/mariadb.service.</code></pre>
<h3 id="6-Linux中的防火墙"><a href="#6-Linux中的防火墙" class="headerlink" title="6. Linux中的防火墙"></a>6. Linux中的防火墙</h3><ol>
<li>检查防火墙状态信息</li>
</ol>
<pre class=" language-shell"><code class="language-shell">[root@localhost src]# firewall-cmd --state
running</code></pre>
<ol start="2">
<li>临时关闭防火墙操作,系统重启后防火墙会重新开启.</li>
</ol>
<pre class=" language-shell"><code class="language-shell">[root@localhost src]# systemctl stop firewalld.service
[root@localhost src]# firewall-cmd --state
not running</code></pre>
<ol start="3">
<li>开启防火墙操作</li>
</ol>
<pre class=" language-shell"><code class="language-shell">[root@localhost src]# systemctl stop firewalld.service
[root@localhost src]# firewall-cmd --state
not running</code></pre>
<ol start="4">
<li>永久关闭防火墙操作</li>
</ol>
<pre class=" language-shell"><code class="language-shell"># 表示系统下次启动时不开启防火墙
[root@localhost src]# systemctl disable firewalld.service
Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
# 防火墙还是运行状态
[root@localhost src]# firewall-cmd --state
running
# 还需要将当前防火墙关闭
[root@localhost src]# systemctl stop firewalld.service
[root@localhost src]# firewall-cmd --state
not running</code></pre>
<ol start="5">
<li>永久开启防火墙操作</li>
</ol>
<pre class=" language-shell"><code class="language-shell"># 表示系统下次启动时开启防火墙
[root@localhost src]# systemctl enable firewalld.service
Created symlink from /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service to /usr/lib/systemd/system/firewalld.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/firewalld.service to /usr/lib/systemd/system/firewalld.service.
# 防火墙还是关闭状态
[root@localhost src]# firewall-cmd --state
not running
# 还需要将当前防火墙开启
[root@localhost src]# systemctl start firewalld.service
[root@localhost src]# firewall-cmd --state
running</code></pre>
<h3 id="7-使用Docker安装mysql"><a href="#7-使用Docker安装mysql" class="headerlink" title="7. 使用Docker安装mysql"></a>7. 使用Docker安装mysql</h3><p>项目的底层数据库采用MySQL，而MySQL采用衍生版本Percona，并且采用docker容器化的方式进行部<br>署。</p>
<ol>
<li>什么是percona？</li>
</ol>
<p>Percona 为 MySQL 数据库服务器进行了改进，在功能和性能上较 MySQL 有着很显著的提升。该版本提升了在高<br>负载情况下的 InnoDB 的性能、为 DBA 提供一些非常有用的性能诊断工具；另外有更多的参数和命令来控制服务<br>器行为。<br>Percona Server 只包含 MySQL 的服务器版，并没有提供相应对 MySQL 的 Connector 和 GUI 工具进行改进。<br>Percona Server 使用了一些 google-mysql-tools, Proven Scaling, Open Query 对 MySQL 进行改造。<br>官网：<a href="https://www.percona.com/software/mysql-database" target="_blank" rel="noopener">https://www.percona.com/software/mysql-database</a></p>
<ol start="2">
<li>安装部署</li>
</ol>
<pre class=" language-shell"><code class="language-shell">#镜像地址：https://hub.docker.com/_/percona/
#拉取镜像
docker pull percona:5.7.23
#创建容器
docker create --name percona -v /data/mysql-data:/var/lib/mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root percona:5.7.23

c5af61393e45d4565c247139f7daea1acce7b057a722fd877ee4e456e2ffc3a0
#参数解释：
--name： percona 指定是容器的名称
-v： /data/mysql-data:/var/lib/mysql 将主机目录/data/mysql-data挂载到容器
的/var/lib/mysql上
-p： 3306:3306 设置端口映射，主机端口是3306，容器内部端口3306
-e： MYSQL_ROOT_PASSWORD=root 设置容器参数，设置root用户的密码为root
percona:5.7.23： 镜像名:版本
#启动容器
docker start percona</code></pre>
<ol start="3">
<li>测试：</li>
</ol>
<p>启动percona的时候发现没啥问题，但是在docker ps查看的时候会发现没有percona，而且查看/data/mysql-data文件也没有写入内容。</p>
<p>使用docker ps -a查看就可以看见问题</p>
<p><img src="./images/loading.gif" data-original="../images/posts/SoftwareInstall-2020-05-26-CentOS-mysql/image-20200529003351809.png" alt="image-20200529003351809"></p>
<p>Exited (1) About a minute ago 服务闪退了</p>
<p>解决方案</p>
<p>给data文件添加权限即可 chmod -R 777 /data </p>
<p><img src="./images/loading.gif" data-original="../images/posts/SoftwareInstall-2020-05-26-CentOS-mysql/image-20200529003513638.png" alt="image-20200529003513638"></p>
<p>测试宿主机客户端: 连接成功</p>
<p><img src="./images/loading.gif" data-original="../images/posts/SoftwareInstall-2020-05-26-CentOS-mysql/image-20200529003316742.png" alt="image-20200529003316742"></p>
<h2 id="8-docker常用命令"><a href="#8-docker常用命令" class="headerlink" title="8. docker常用命令"></a>8. docker常用命令</h2><p>列出所有容器ID</p>
<pre class=" language-shell"><code class="language-shell">docker ps -aq</code></pre>
<p>查看所有运行或者不运行容器</p>
<pre class=" language-shell"><code class="language-shell">docker ps -a</code></pre>
<p>停止所有的container（容器），这样才能够删除其中的images：</p>
<pre class=" language-shell"><code class="language-shell">docker stop $(docker ps -a -q) 或者 docker stop $(docker ps -aq) </code></pre>
<p>如果想要删除所有container（容器）的话再加一个指令：</p>
<pre class=" language-shell"><code class="language-shell">docker rm $(docker ps -a -q) 或者 docker rm $(docker ps -aq)</code></pre>
<p> 查看当前有些什么images</p>
<pre class=" language-shell"><code class="language-shell">docker images</code></pre>
<p>删除images（镜像），通过image的id来指定删除谁</p>
<pre class=" language-shell"><code class="language-shell">docker rmi <image id></code></pre>
<p>想要删除untagged images，也就是那些id为的image的话可以用</p>
<pre class=" language-shell"><code class="language-shell">docker rmi $(docker images | grep "^<none>" | awk "{print $3}")</code></pre>
<p>要删除全部image（镜像）的话</p>
<pre class=" language-shell"><code class="language-shell">docker rmi $(docker images -q)</code></pre>
<p>强制删除全部image的话</p>
<p>强制删除全部image的话</p>
<pre class=" language-shell"><code class="language-shell">docker rmi -f $(docker images -q)</code></pre>
<p>从容器到宿主机复制</p>
<pre class=" language-shell"><code class="language-shell"> docker cp tomcat：/webapps/js/text.js /home/admin
 docker  cp 容器名:  容器路径       宿主机路径         </code></pre>
<p>从宿主机到容器复制</p>
<p>从宿主机到容器复制</p>
<pre class=" language-shell"><code class="language-shell"> docker cp /home/admin/text.js tomcat：/webapps/js
 docker cp 宿主路径中文件      容器名  容器路径  </code></pre>
<p> 删除所有停止的容器</p>
<pre class=" language-shell"><code class="language-shell">docker container prune</code></pre>
<p>删除所有不使用的镜像</p>
<pre class=" language-shell"><code class="language-shell">docker image prune --force --all或者docker image prune -f -a</code></pre>
<p>停止、启动、杀死、重启一个容器</p>
<p>停止、启动、杀死、重启一个容器</p>
<pre class=" language-shell"><code class="language-shell">docker stop Name或者ID  
docker start Name或者ID  
docker kill Name或者ID  
docker restart name或者ID</code></pre>
<p>docker进入容器，查看配置文件</p>
<p>docker进入容器，查看配置文件</p>
<pre><code>docker exec ：在运行的容器中执行命令
        -d :分离模式: 在后台运行
        -i :即使没有附加也保持STDIN（标准输入） 打开,以交互模式运行容器，通常与 -t 同时使用；
        -t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；
docker exec -it  f94d2c317477 /bin/bash</code></pre><p>出现root@f94d2c317477:/usr/share/elasticsearch/config# vi elasticsearch.yml<br>bash: vi: command not found</p>
<pre class=" language-shell"><code class="language-shell">apt-get update && apt-get install vim -y</code></pre>
<p>修改配置、退出容器</p>
<pre class=" language-shell"><code class="language-shell">1、如果要正常退出不关闭容器，请按Ctrl+P+Q进行退出容器
2、如果使用exit退出，那么在退出之后会关闭容器，可以使用下面的流程进行恢复
使用docker restart命令重启容器
使用docker attach命令进入容器</code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://fyvan.github.io/undefined/4871.html" title="CentOS7安装Mysql" target="_blank" rel="external">http://fyvan.github.io/undefined/4871.html</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/cofess" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="./images/loading.gif" data-original="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/cofess" target="_blank"><span class="text-dark">昵称</span><small class="ml-1x">Web Developer &amp; Designer</small></a></h3>
        <div>个人简介。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/undefined/d618.html" title="Redis安装与用法"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/undefined/981a.html" title="CentOS7安装Nginx"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="./images/loading.gif" data-original="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="./images/loading.gif" data-original="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://weibo.com/cofess" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
        <li><a href="https://www.behance.net/cofess" target="_blank" title="Behance" data-toggle=tooltip data-placement=top><i class="icon icon-behance"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







<script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,e,a=0;a<r.length;a++)t=r[a],0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight+240||document.documentElement.clientHeight+240)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
</html>